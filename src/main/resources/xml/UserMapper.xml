<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.simple.mall.api.mapper.UserMapper">

    <!--新增用户信息-->
    <insert id="insertUserInfo" parameterType="com.example.simple.mall.common.entity.User">
        INSERT INTO user
        (user_name,
         email,
         password,
         user_gender,
         status)
        VALUES (#{userName}, #{email}, #{password}, #{userGender}, #{status})
    </insert>

    <!-- 根据邮箱信息查询单个用户 -->
    <select id="selectUserByEmail" resultType="com.example.simple.mall.common.dto.UserDTO">
        SELECT
        id,
        user_name AS userName,
        email,
        password,
        user_gender AS userGender,
        status AS status
        FROM user
        WHERE 1 = 1
        and
        <if test="id != null">
            id = #{id}
        </if>
        <if test="email != null and email != ''">
            email = #{email}
        </if>
    </select>
</mapper>